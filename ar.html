<!-- <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.7.5/aframe/build/aframe-ar.js"></script>
<script src='https://cdn.jsdelivr.net/npm/webxr-polyfill@latest/build/webxr-polyfill.js'></script>
<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.0.1/dist/aframe-extras.min.js"></script> -->
<script src="js/aframe.min.js"></script>
<script src="js/aframe-ar.js"></script>
<script src='js/webxr-polyfill.js'></script>
<script src="js/aframe-extras.min.js"></script>
<script>
  var polyfill = new WebXRPolyfill();
  AFRAME.registerComponent('registerevents', {
    init: function () {
      var marker = this.el;
      marker.addEventListener('markerFound', function () {
        var markerId = marker.id;
        console.log('markerFound', markerId);
        // TODO: Add your own code here to react to the marker being found.
        if (markerId === 'kirby_ginga') {
          var scene_test = document.getElementById("kirby_ginga");
          var entityEl = document.createElement('a-entity');
          entityEl.setAttribute('id', 'toy');
          entityEl.setAttribute('position', "0 0 -1.5");
          entityEl.setAttribute('rotation', "-90 90 -90");
          entityEl.setAttribute('gltf-model', "url(assets/kirby_ginga/scene.gltf)");
          entityEl.setAttribute('animation-mixer', { clip: '*', loop: 'once' });
          scene_test.appendChild(entityEl);
          entityEl.addEventListener('animation-finished', function () {
            // entityEl.removeAttribute('animation-mixer');
            entityEl.parentNode.removeChild(entityEl);
            var entityEl2 = document.createElement('a-entity');
            entityEl2.setAttribute('id', 'toy2');
            entityEl2.setAttribute('position', "-1 0 -1.5");
            entityEl2.setAttribute('rotation', "-90 90 -90");
            entityEl2.setAttribute('gltf-model', "url(assets/kirby_ginga/scene.gltf)");
            entityEl2.setAttribute('animation-mixer', { clip: '*', loop: 'once' });
            scene_test.appendChild(entityEl2);
          }, { once: true });

          // var entityEl2 = document.createElement('a-entity');
          // entityEl2.setAttribute('id', 'toy2');
          // entityEl2.setAttribute('position', "-3 0 -1.5");
          // entityEl2.setAttribute('rotation', "-90 90 -90");
          // entityEl2.setAttribute('gltf-model', "url(assets/kirby_ginga/scene.gltf)");
          // entityEl2.setAttribute('animation-mixer', { clip: '*', loop: 'once' });
          // scene_test.appendChild(entityEl2);

          // var toy = document.getElementById("toy");
          // var toy2 = document.getElementById("toy2");
          // console.log('kirby_ginga start')
          // // test.removeAttribute('animation-mixer')//讓影片能重來
          // toy.setAttribute('animation-mixer', { clip: '*', loop: 'once' });
          // toy.emit('ar-ready');
          // toy.addEventListener('animation-finished', function () {
          //   toy.removeAttribute('animation-mixer');
          //   toy2.setAttribute('animation-mixer', { clip: '*', loop: 'once' });
          //   toy2.addEventListener('animation-finished', function () {
          //     toy2.setAttribute('animation-mixer', { clip: '*', loop: 'once' });
          //   }, { once: true });
          // }, { once: true });
        }
      });
      marker.addEventListener('markerLost', function () {
        var markerId = marker.id;
        console.log('markerLost', markerId);
        // TODO: Add your own code here to react to the marker being lost.
      });

    }
  });
</script>

<body style='margin : 0px; overflow: hidden;'>
  <a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false;'>
    <!-- <a-marker id='1_hearts' type='pattern' url='assets/marker/hearts/pattern-BAOBAO_1.patt' registerevents>
      <a-entity position='0 0 -1' rotation="0 0 0" gltf-model="url(assets/cards/hearts/1_hearts.glb)">
      </a-entity>
    </a-marker>
    <a-marker id='2_hearts' type='pattern' url='assets/marker/hearts/pattern-BAOBAO_2.patt' registerevents>
      <a-entity position='0 0 -1' rotation="0 0 0" gltf-model="url(assets/cards/hearts/2_hearts.glb)">
      </a-entity>
    </a-marker>
    <a-marker id='3_hearts' type='pattern' url='assets/marker/hearts/pattern-BAOBAO_3.patt' registerevents>
      <a-entity position='0 0 -1' rotation="0 0 0" gltf-model="url(assets/cards/hearts/3_hearts.glb)">
      </a-entity>
    </a-marker>
    <a-marker id='4_hearts' type='pattern' url='assets/marker/hearts/pattern-BAOBAO_4.patt' registerevents>
      <a-entity position='0 0 -1' rotation="0 0 0" gltf-model="url(assets/cards/hearts/4_hearts.glb)">
      </a-entity>
    </a-marker>
    <a-marker id='5_hearts' type='pattern' url='assets/marker/hearts/pattern-BAOBAO_5.patt' registerevents>
      <a-entity position='0 0 -1' rotation="0 0 0" gltf-model="url(assets/cards/hearts/5_hearts.glb)">
      </a-entity>
    </a-marker>
    <a-marker id='6_hearts' type='pattern' url='assets/marker/hearts/pattern-BAOBAO_6.patt' registerevents>
      <a-entity scale="0.01 0.01 0.01" position='0 -4 -1' rotation="0 0 0" gltf-model="url(assets/cards/hearts/6_hearts.glb)">
      </a-entity>
    </a-marker>
    <a-marker id='7_hearts' type='pattern' url='assets/marker/hearts/pattern-BAOBAO_7.patt' registerevents>
      <a-entity position='0 0 -1' rotation="0 0 0" gltf-model="url(assets/cards/hearts/7_hearts.glb)">
      </a-entity>
    </a-marker>
    <a-marker id='8_hearts' type='pattern' url='assets/marker/hearts/pattern-BAOBAO_8.patt' registerevents>
      <a-entity position='0 0 -1' rotation="0 0 0" gltf-model="url(assets/cards/hearts/8_hearts.glb)">
      </a-entity>
    </a-marker>
    <a-marker id='9_hearts' type='pattern' url='assets/marker/hearts/pattern-BAOBAO_9.patt' registerevents>
      <a-entity position='0 0 -1' rotation="0 0 0" gltf-model="url(assets/cards/hearts/9_hearts.glb)">
      </a-entity>
    </a-marker>
    <a-marker id='10_hearts' type='pattern' url='assets/marker/hearts/pattern-BAOBAO_10.patt' registerevents>
      <a-entity position='0 0 -1' rotation="0 0 0" gltf-model="url(assets/cards/hearts/10_hearts.glb)">
      </a-entity>
    </a-marker>
    <a-marker id='11_hearts' type='pattern' url='assets/marker/hearts/pattern-BAOBAO_11.patt' registerevents>
      <a-entity position='0 0 -1' rotation="0 0 0" gltf-model="url(assets/cards/hearts/11_hearts.glb)">
      </a-entity>
    </a-marker>
    <a-marker id='12_hearts' type='pattern' url='assets/marker/hearts/pattern-BAOBAO_12.patt' registerevents>
      <a-entity position='0 0 -1' rotation="0 0 0" gltf-model="url(assets/cards/hearts/12_hearts.glb)">
      </a-entity>
    </a-marker>
    <a-marker id='13_hearts' type='pattern' url='assets/marker/hearts/pattern-BAOBAO_13.patt' registerevents>
      <a-entity position='0 0 -1' rotation="0 0 0" gltf-model="url(assets/cards/hearts/13_hearts.glb)">
      </a-entity>
    </a-marker> -->
    <a-marker id='kirby_ginga' type='pattern' url='assets/marker/pattern-people.patt' registerevents>
      <!-- <a-scene id='scene_test'>
      </a-scene> -->
    </a-marker>
  </a-scene>
</body>